<?php/** * This example shows making an SMTP connection with authentication. *///SMTP needs accurate times, and the PHP time zone MUST be set//This should be done in your php.ini, but this is how to do it if you don't have access to thatdate_default_timezone_set('Etc/UTC');require APP_INCLUDE_Library.'smtp_mail/PHPMailerAutoload.php';//require APP_INCLUDE_Library.'smtp_mail/Security.php';class SMTP_mail {    public $mail;    public $sender_email;    public $username;    public $password;    public $host;    public $port;    public $subject;       public $sender_name;   // public $product_name;    public function __construct() {//Create a new PHPMailer instance                     $this->mail = new PHPMailer;        $this->port = 465;        $this->host = "smtp.sendgrid.net";               $this->username = "apikey";        $this->password = "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";    //        $this->password = "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";    //        $this->password = "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";             }     public function sendMailForgot($email,$otp,$type) {        $this->sender_email ='bounty@hamstertoken.com';         $this->sender_name ='Hamster';        $this->subject = "Forgot password";                  //$key_val = $this->Encrypt($id);        //$notification = $message['notification'];        //$notification = str_replace("___", "<br/> ", $notification);        //Tell PHPMailer to use SMTP        $this->mail->isSMTP();        //Enable SMTP debugging        // 0 = off (for production use)        // 1 = client messages        // 2 = client and server messages        $this->mail->SMTPDebug = 0;        //Ask for HTML-friendly debug output        $this->mail->Debugoutput = 'html';        //Set the hostname of the mail server        $this->mail->Host = $this->host;        //Set the SMTP port number - likely to be 25, 465 or 587        //$this->mail->Port = 25;        $this->mail->Port = $this->port;        //Whether to use SMTP authentication        $this->mail->SMTPAuth = true;        $this->mail->SMTPSecure = 'ssl';        //Username to use for SMTP authentication        $this->mail->Username = $this->username;        //Password to use for SMTP authentication        $this->mail->Password = $this->password;        //Set who the message is to be sent from        $this->mail->setFrom($this->sender_email);        //Set an alternative reply-to address        $this->mail->addReplyTo('no-reply@hamstertoken.com');        //Set who the message is to be sent to        $this->mail->addAddress($email);        //Set the subject line        $this->mail->Subject = $this->subject;        //Read an HTML message body from an external file, convert referenced images to embedded,        //convert HTML into a basic plain-text alternative body//        $explode = explode("@", $email);//        $email_name = $explode[0];        //$contents = file_get_contents('verify_email.html');        //$contents = file_get_contents('../smtp_mail/verify_email11.html');        $html = file_get_contents(APP_INCLUDE_Library.'smtp_mail/forgot.html');        //echo $html;        //echo $id;die;//                            $product_name = 'Find A home ';//                            $name='Jatin';//                            $sendername='Social Infotech';//                            $url='http://google.com';//        $security = new Security();        //$encrypted = $security->encrypt_string(trim($id));      //  $email= rtrim(strtr(base64_encode($email), '+/', '-_'), '=');                //$newurl = $this->link . $encrypted;        $word = array('{{otp}}');        $replace = array($otp);       // echo $this->link.base64url_encode($email);        //echo"$id--";print_r($replace);die;        $html = str_replace($word, $replace, $html);        $this->mail->msgHTML($html, dirname(__FILE__));        /* $this->mail->msgHTML('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">          <html xmlns="http://www.w3.org/1999/xhtml">          <head>          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />          <title>Renthouse</title>          </head>          <body>'.$message.'          </body>          </html>          ',          dirname(__FILE__)); */        //Replace the plain text body with one created manually        $this->mail->AltBody = "";      //  echo "<pre>"; print_r($this->mail);die;        //Attach an image file        //$this->mail->addAttachment('images/phpmailer_mini.png');        //send the message, check for errors        if (!$this->mail->send()) {            echo "Mailer Error: " . $this->mail->ErrorInfo;die;            return "Mailer Error: " . $this->mail->ErrorInfo;        } else {//            echo "Message sent!";die;            return true;        }    }            //Authentication               public function send_email_offers($email) {        $this->sender_email ='codexives@codexives.com';         $this->sender_name ='Hpetax';        $this->subject = "Credential";                  $this->mail->isSMTP();        $this->mail->SMTPDebug = 0;        //Ask for HTML-friendly debug output        $this->mail->Debugoutput = 'html';        //Set the hostname of the mail server        $this->mail->Host = $this->host;        //Set the SMTP port number - likely to be 25, 465 or 587        //$this->mail->Port = 25;        $this->mail->Port = $this->port;        //Whether to use SMTP authentication        $this->mail->SMTPAuth = true;        $this->mail->SMTPSecure = 'ssl';        //Username to use for SMTP authentication        $this->mail->Username = $this->username;        //Password to use for SMTP authentication        $this->mail->Password = $this->password;        //Set who the message is to be sent from        $this->mail->setFrom($this->sender_email);        //Set an alternative reply-to address        $this->mail->addReplyTo('no-reply@hamstertoken.com');        //Set who the message is to be sent to        $this->mail->addAddress($email);        //Set the subject line        $this->mail->Subject = $this->subject;        $html = file_get_contents(APP_INCLUDE_Library.'smtp_mail/template1.html');        $this->mail->msgHTML($html, dirname(__FILE__));        $this->mail->AltBody = "";        if (!$this->mail->send()) {            echo "Mailer Error: " . $this->mail->ErrorInfo;die;            return "Mailer Error: " . $this->mail->ErrorInfo;        } else {            echo "Message sent!";die;            return true;        }    }            public function sendMail($email,$name,$phone,$message) {                           $this->sender_email ='info.totheidea@gmail.com';         $this->sender_name ='Shruti';                $this->subject ='For Inquiry';        $this->mail->isSMTP();        $this->mail->SMTPDebug = 0;        $this->mail->Debugoutput = 'html';        $this->mail->Host = $this->host;        $this->mail->Port = $this->port;        $this->mail->SMTPAuth = true;        $this->mail->SMTPSecure = true;        $this->mail->Username = $this->username;        $this->mail->Password = $this->password;        $this->mail->setFrom($this->sender_email);        $this->mail->addReplyTo($this->sender_email);        $this->mail->addAddress('vasimlook@gmail.com');                   $this->mail->Subject = $this->subject;        $this->mail->Body ='Name: '.$name.'<br>Message: '.$message. '<br>Contact Number:' .$phone ;         $this->mail->AltBody = "";          if (!$this->mail->send()) {            echo "Mailer Error: " . $this->mail->ErrorInfo;die;            return "Mailer Error: " . $this->mail->ErrorInfo;        } else {            echo "Message sent!";die;            return true;        }    } }?>